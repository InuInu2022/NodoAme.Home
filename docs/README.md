# NodeAme（ノドアメ）

しゃべるCeVIOソング補助ツール [#喋らせてみた](https://www.google.com/search?q=%23%E5%96%8B%E3%82%89%E3%81%9B%E3%81%A6%E3%81%BF%E3%81%9F)

## これはなに？

CeVIO AIソング（可不ちゃんなど）をしゃべってる風に歌わせるための補助ツールです。
おまけ機能で歌詞の音素表記変換機能もあります。

## 紹介動画

- [YouTube](https://youtu.be/lHshJSPfd-M)
- [niconico](https://nico.ms/sm39928066)

<iframe width="560" height="315" src="https://www.youtube.com/embed/lHshJSPfd-M" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<iframe width="312" height="176" src="https://ext.nicovideo.jp/thumb/sm39928066" scrolling="no" style="border:solid 1px #ccc;" frameborder="0"><a href="https://www.nicovideo.jp/watch/sm39928066">可不ちゃんにしゃべってもらえるソフトつくってみた【NodoAme】#第1回CeVIOクリエイト祭</a></iframe>

## DL

- [公式サイト](https://inuinu2022.github.io/NodoAme.Home/)
  - [最新版はこちら](https://github.com/InuInu2022/NodoAme.Home/releases/latest)
- [bowlroll](https://bowlroll.net/file/269946) ※予備
  - pass:カレーうどん

ニコニコ動画などでこのツールを使った動画などを公開する場合は、以下のニコニコモンズをコンテンツツリーに登録して下さい！（義務ではありません）

[nc262424](https://commons.nicovideo.jp/material/nc262424)

## できること

### CeVIOトークのしゃべりをマネして楽譜データを出力する

NodoAmeはCeVIOトーク(CS/AI)のボイスにしゃべらせた音声をマネして、CeVIO AIソングむけの楽譜データ(ccstファイル)を出力します。
出力したccstファイルをソングエディタ上で再生すると、しゃべってる風に歌ってくれます。

現在は次のトーク音源に対応しています。

- [CeVIO AI](https://cevio.jp/)
- [CeVIO Creative Studio 7](https://cevio.jp/product/ccs/)
- [VOICEVOX](https://voicevox.hiroshiba.jp/) (⚠仮対応)
- 標準音声

CeVIOトーク音源を持っていなくとも、内蔵の標準トーク音源や、無料のVOICEVOXなどの対応他ソフトのトーク音源が使えます。

楽譜データの書き出しは次のソング音源に対応しています。

- CeVIO AI
  - 可不（KAFU）
  - さとうささら
  - 結月ゆかり麗
  - 東北きりたん
  - IA
  - IA English（英語音源なので発音が変です）
  - OИE

※CeVIO Creative Studio向けソング音源は出力できますが、発音がおかしいです。現時点では未対応です。

- CeViO Creative Studio 7
  - さとうささら
  - ハルオロイド・ミナミ
  - Color Voice Series

### 文章の音素表記を表示する

CeVIOで使われる**音素表記**に変換します。
オプションをONにすると、めっちゃむずかしい日本語の発音ルールに合わせて自動でそれっぽく変更します。

どちらかというとソングユーザー向けです。
実はこっそり本命機能。

## 大事なこと

- NodoAmeは素人がつくった、プロトタイプのアプリです。自己責任でおねがいします！
- NodoAmeをつかってパソコンが壊れたり、ハッカーに侵入されても責任はとれません！ノークレーム・ノーリターンでおねがいします！
  - ウィルスとかは確認してるんでたぶん大丈夫だとおもいますが…
- **他のキャラクターの声をマネする仕組み**なので、マネする元のキャラの利用規約は調べてください！
  - もしかすると禁止されてるキャラがいるかも？
  - マネと言ってもAIとかすごい技術は使ってないので大丈夫だとはおもいますが…
  - 動画とかで使う場合は「**演技指導：キャラ名**」みたいな表記がいるかも？

## ひつようなもの

### ゼッタイ必要

- Windows 10以降
- CeVIO AIソングエディター＆ボイス
- .NET Framework 4.8
  - ※CeVIOが動く場合はもう入ってます！

### あったらいいな

- CeVIO AIトークエディター＆ボイス
- CeVIO CSトークエディター＆ボイス
- VOICEVOX

## インストール

1. [ダウンロードする](#DL)
2. ダウンロードした`NodoAme-v【バージョン名】.zip`ファイルを展開する
3. 展開したフォルダをお好きな場所に置く（おこのみで）
4. フォルダの中の`NodoAme.exe`をダブルクリックして実行

- アップデートは上書きして下さい
- アンインストールはフォルダごと消して下さい

## つかいかた

くわしくは[紹介動画](#紹介動画)をみてね！

### ソングボイスにしゃべらせる

1. しゃべりを参考にするために、左上のトークソフト、キャラ、感情・スタイル・プリセットを選ぶ
   1. インストールしていないソフトは選んでも動きません
   2. CeVIOトークはトークエディタとトークボイスがインストールされていなければ動きません
   3. VOICEVOXは事前に起動していてください
2. セリフ入力欄にセリフを入れる
4. 試聴ボタンを押して、しゃべり方を確認する
   1. お好みでパラメータを変える
5. 気に入らなければセリフやパラメータ、キャラを変える
6. いい感じになったら、出力ボタンを押す
7. 出力されたccstファイルをCeVIOで読み取って再生する
   1. 最初の設定では自動でCeVIOが起動すると思います
   2. いくつかダイアログがでますがそのまま進めてください
   3. トラックはミュート状態になってますのでソロに切り替えて再生してください
8. いい感じにしゃべっていたら、「ソングのwav書き出し」でトラック毎に保存してください！
   1. ファイル名がそのままセリフになるので、[Aviutl+かんしくん](https://oov.github.io/aviutl_psdtoolkit/forcepser.html)や[YMM4のカスタムボイス](https://manjubox.net/ymm4/faq/%E3%82%86%E3%81%A3%E3%81%8F%E3%82%8A%E3%83%9C%E3%82%A4%E3%82%B9/%E5%A4%96%E9%83%A8%E3%81%AE%E9%9F%B3%E5%A3%B0%E5%90%88%E6%88%90%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%B3%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E9%9F%B3%E5%A3%B0%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%9F%E3%81%84/)で自動で取り込むことができます

### 音素を調べる

※音素を調べるだけならトークソフトは不要です。

1. セリフ入力欄にセリフを入れる
2. 右の音素欄に自動で表示される
3. オプションで音素表示を切り替える
4. セリフを入力し直す
   1. オプションはすぐには反映されません！
   2. スペースを入れるなどしてちょっとだけ変えてください！

- 音素表示オプション
  - 音素/ひらがな表示：⚠まだ機能しません
  - スペース区切り：スペースで区切るかどうか
  - 「ん」を変換する：「ん」を`[n][m][N][n,g]`の4パターンに変換します
  - 「が」を変換する：「が」を`[g][n,g]`の2パターンに変換します
  - 無声母音そのまま/小文字化/削除：最初は大文字で表示される無声母音を変換します


## ⚠プロトタイプ版の制限

NodoAmeはプロトタイプ版なので、未実装機能やない機能が色々あります！リクエストがあれば機能が増えるかも？

### ソング出力は手動

一応、書き出した楽譜ファイルを自動で読み込んでもらえるようにしました！

ですが、そこから先は手動です…！
CeVIOトークには外部連携インターフェイスが用意されていますが、ソングにはないので自動化が難しいです！

みんなで公式にリクエストを送ろう！

[https://cevio.jp/contact_soft/](https://cevio.jp/contact_soft/)

### 「ん」・「が」の使い分け未対応

日本語は「ん」や「が」の発音を使い分けたりしますが、現在未対応です。

「音素表示機能」ではオプションで対応しています。それを参考にすることはできます！

### CeVIO CSソング未対応

喋ってる風の楽譜データはCeVIO CSでも読めますが、ちゃんと発音できません。音声合成エンジンの違いが理由かも？
TMGの青線を手で調整すると少しはマシになるんですが…。

昔ながらのトークロイド的な方法で出力するように将来的に改良するかもしれません（その時は変換すると他のボーカルシンセサイザーでも使えるようになると思います）。

### セリフファイル出力未対応

セリフはトラックファイル名になるため、そのまま書き出しすれば動画制作ツール（Aviutl+かんしくん/YMM4など）でセリフとして取り込めますが、長文など一部対応できない場合があります。

セリフを直接出力する方法を検討しています!

### CCSファイル出力未対応

まとめてccsファイルで出力する機能を検討しています。

### セリフは最大30行

CeVIOソングは30トラックまでしか読み込めないため30行だけ用意しています。

大量にセリフを用意する場合は他に原稿を用意しておいて、コピペしてください！

### セリフごとのパラメータに未対応

現在はトークソフトの調声パラメータは全体で共通ですが、セリフごとに設定出来るようにする予定です。

### CeVIOの感情合成に未対応

CeVIOトークの感情は現在プリセットと同等のもののみ対応です。~~UIつくるの面倒~~ 対応を検討しています!

### VOICEVOXのパラメータに未対応

VOICEVOXはキャラの選択とスタイルの変更だけ対応しています。

### セリフやパラメータの保存に未対応

現在は保存する方法が現在ありません。
プロジェクトファイル形式をかんがえてます！

## やりたいこと

- 入力
  - [ ] CeVIOトークの感情合成対応
  - [ ] [VOICEVOX](https://voicevox.hiroshiba.jp/)のパラメータ対応
  - [ ] [COEIROINK](https://coeiroink.com/)への対応
  - [ ] セリフごとのパラメータに対応
  - [ ] 台本テキストの読み込み
- 出力
  - [x] 標準音声からの出力対応
  - [x] 母音無声化 出力対応
  - [x] カレーうどんをすする 出力対応
  - [ ] 「ん」の使い分け 出力対応
  - [ ] 「が」の使い分け 出力対応
  - [ ] セリフファイル出力
  - [ ] まとめてccsファイル出力
  - [ ] 視聴した音声のファイル出力
  - [ ] 対象キャラに合わせたCeVIO AIとCSの自動起動に対応
- 保存
  - [x] オプションの設定保存に対応
  - [ ] セリフやパラメータの保存(プロジェクトファイル)に対応

## よくある質問

### ❔CeVIO Creative Studioのソングはしゃべらせられますか？

NodeAmeはCSのソングボイス向けに出力できますが、
今の仕組みだとちゃんとしゃべってるように聞こえません…
リクエストがあれば将来的なアップデートで対応します！

### ❔コメント読み上げとかに使えますか？

使えません！

CeVIOソングは自動化できないので、ソング再生は手動になってます。

みんなで公式にリクエストを送ろう！
[https://cevio.jp/contact_soft/](https://cevio.jp/contact_soft/)

### ❔CeVIO AI以外のボーカルシンセサイザーには対応していますか？

今の仕組みはおそらくCeVIO AIでしかつかえません。
トークロイドでよく使われる楽譜の使い方をしていない為、ccsファイルを変換してもおそらく発音できないと思います。

※Synthesizer Vはもしかしたら変換すれば動くかも？わかりません！

リクエストがあれば対応するかも？

### ❔参考にするトークソフトはCeVIO以外に対応していますか？

NodoAmeは [SHABERU](http://akihiro0105.web.fc2.com/Downloads/Downloads-SHABERU.html)/[Open JTalk](https://open-jtalk.sp.nitech.ac.jp/)などで使われるボイス音源（`htsvoice`形式の音響モデル）に対応しています。標準男声はatr503_m001、標準女声はtohoku-f01です。利用する場合はキャラクターのボイス音源のライセンスを確認して下さい。

- 追加ボイス音源の入手先
  - [SHABERU 追加音響モデル](http://akihiro0105.web.fc2.com/Downloads/Downloads-htsvoice.html)
  - [Open JTalk の音響モデルを試す](https://petile.com/mahoroba/e1875.html)

NodoAmeは無料のトークソフト [VOICEVOX](https://voicevox.hiroshiba.jp/) にも対応しています。

- **VOICEVOX**
  - 暫定で対応しました！
  - 利用の際はVOICEVOXを先に起動しておいてください
  - パラメータ変更は対応予定です
- **COEIROINK**
  - API側が対応され次第、対応予定です
    - ※音素表示と視聴は対応済。
  - 利用の際はVOICEVOXを先に起動しておいてください


---

- 対応済みトーク音源
  - `htsvoice`形式の音響モデル
- 対応済みトークソフト
  - VOICEVOX
- 対応予定トークソフト
  - COEIROINK

#### それ以外のトークソフト対応について

CoeFontはAPIが公開されているのですが、利用したい情報がとれないっぽいです。A.I.VOICEはAPIが公開されたら検討してみます。

考えてるアイディアがうまく行けば、VOICEROIDや生声音声もうまくいくかもしれません。ただし、精度は落ちるかもです…。

### ❔CeVIOのトークエディタで細かく調声したデータはマネさせられますか？

現在はできません！
むずかしいですけど、リクエストがあれば将来的な対応を考えるかも？

### ❔英語はしゃべらせられますか？

運が良ければ…。

英語のトーク音源（CeVIO AIトーク弦巻マキEnglish）に喋ってもらった音声をマネしたデータを出力はできますが、日本語にない音が含まれる場合は発音できません。

セリフの中の音素が日本語と**運良く**一緒になれば、日本語ボイスでも発音できるかも？

英語トーク音源→英語ソング音源はうまくいきます（例：弦巻マキトークEnglish→IAソングEnglish）。

### ❔ラップやポエトリーリーディングに使えますか？

難しそうです…。

BPMが150固定とか、あとからの手直しにはあまり向いてない方法（PIT/TMG/VOLで再現）なので難しいです。

セリフ全体の長さは一応変更できますが、書き出してみないと長さがわからないですし（リクエストがあれば一応表示できます）、リズムに合わせるほど細かい調声はできません。

波形データに書き出して、DAW上で加工するならできるかも？

### ❔Macで動きますか？

うごきません！

### ❔CeVIOトークを歌わせることはできますか？

できません！

CeVIO Creative Studioなら[CevioTalkSync](https://www.nicovideo.jp/watch/sm37419010)というソフトがあります！

## ライセンス

```txt
The MIT License
Copyright (c) 2022 InuInu
```

MIT Licenseです。

ニコニコ動画などでこのツールを使った動画を公開する場合は、以下のニコニコモンズをコンテンツツリーに登録して下さい！（義務ではありません）

[nc262424](https://commons.nicovideo.jp/material/nc262424)

全文や使用ライブラリなどのライセンスは [Licenses](Licenses/)フォルダー以下をご覧くださーい！

## きろく

- ver. 0.1.0 : MATSURIに合わせてプロトタイプ版リリース

## スペシャルサンクス

- たらそば さん [@tarasoba9672](https://twitter.com/tarasoba9672)

## 🐶つくった

- InuInu（いぬいぬ）
  - <https://bit.ly/InuInuMusic>
  - [@InuInuGames](https://twitter.com/InuInuGames)
  - [note.com](https://note.com/inuinu_)
